/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
/**
 * angular2-cookie-law
 *
 * Copyright 2016-2018, @andreasonny83, All rights reserved.
 *
 * @author: @andreasonny83 <andreasonny83@gmail.com>
 */
import { Component, HostBinding, ViewEncapsulation, Input, Output, EventEmitter } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
import { closeIcon } from './icons';
import { translateInOut } from './animations';
export class CookieLawComponent {
    /**
     * @param {?} domSanitizer
     */
    constructor(domSanitizer) {
        this.domSanitizer = domSanitizer;
        this.isSeen = new EventEmitter();
        this.transition = 'bottomIn';
        this._position = 'bottom';
        this.cookieLawClass = true;
    }
    /**
     * @return {?}
     */
    get learnMore() {
        return this._learnMore;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set learnMore(value) {
        this._learnMore = value !== null && `${value}` !== 'false' ? value : null;
    }
    /**
     * @return {?}
     */
    get awsomeCloseIcon() {
        return this._awsomeCloseIcon;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set awsomeCloseIcon(value) {
        this._awsomeCloseIcon =
            value !== null && `${value}` !== 'false' ? value : null;
    }
    /**
     * @return {?}
     */
    get target() {
        return this._target;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set target(value) {
        this._target =
            value !== null &&
                `${value}` !== 'false' &&
                (`${value}` === '_blank' || `${value}` === '_self')
                ? value
                : '_blank';
    }
    /**
     * @return {?}
     */
    get position() {
        return this._position;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set position(value) {
        this._position =
            value !== null &&
                `${value}` !== 'false' &&
                (`${value}` === 'top' || `${value}` === 'bottom')
                ? value
                : 'bottom';
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.noopener = this._target === '_blank';
        this.transition = this.position === 'bottom' ? 'bottomIn' : 'topIn';
        if (this._awsomeCloseIcon) {
            this.closeSvg = this.domSanitizer.bypassSecurityTrustHtml(`<i class="fab ${this._awsomeCloseIcon}"></i>`);
        }
        else {
            this.closeSvg = this.domSanitizer.bypassSecurityTrustHtml(closeIcon);
        }
        this.currentStyles = {
            top: this.position === 'top' ? '0' : null,
            bottom: this.position === 'top' ? 'initial' : null
        };
    }
    /**
     * @param {?} evt
     * @return {?}
     */
    afterDismissAnimation(evt) {
        if (evt.toState === 'topOut' || evt.toState === 'bottomOut') {
            this.isSeen.emit(true);
        }
    }
    /**
     * @param {?=} evt
     * @return {?}
     */
    dismiss(evt) {
        if (evt) {
            evt.preventDefault();
        }
        this.transition = this.position === 'top' ? 'topOut' : 'bottomOut';
    }
}
CookieLawComponent.decorators = [
    { type: Component, args: [{
                selector: 'cookie-law-component',
                template: `<div
  class="cookie-law-wrapper"
  [ngStyle]="currentStyles"
  [@transition]="transition"
  (@transition.done)="afterDismissAnimation($event)"
>
  <div class="copy">
    <span #ref><ng-content></ng-content></span>

    <span *ngIf="ref.childNodes.length == 0">
      By continuing to browse the site, you're agreeing to our use of cookies.
      <span *ngIf="learnMore">
        Learn more in our
        <a [href]="learnMore" [target]="target" [rel]="noopener ? 'noopener noreferrer' : null"
          >privacy policy</a
        >.
      </span>
    </span>

    <a
      href="#"
      role="button"
      class="dismiss"
      [innerHTML]="closeSvg"
      (click)="dismiss($event)"
      [attr.aria-label]="closeSvg"
    ></a>
  </div>
</div>
`,
                styles: [`.cookie-law-wrapper{background:#333;color:#bbb;display:block;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:15px;font-weight:200;line-height:20px;position:fixed;bottom:0;left:0;width:100%;z-index:999999999;font-smooth:always;-webkit-font-smoothing:antialiased}.cookie-law-wrapper a{color:#bbb;transition:color .2s}.cookie-law-wrapper a:hover{color:#fff}.cookie-law-wrapper a:hover svg{fill:#fff}.cookie-law-wrapper .dismiss{display:block;box-sizing:border-box;padding:10px;position:absolute;top:0;right:10px;text-decoration:none;line-height:20px}.cookie-law-wrapper .dismiss svg{display:block;fill:#bbb;width:20px;height:20px;transition:fill .2s}.cookie-law-wrapper .copy{box-sizing:border-box;padding:10px 60px 10px 10px}.cookie-law-wrapper .copy span{color:#fff;font-weight:400}.cookie-law-wrapper .copy a{text-decoration:underline}.cookie-law-wrapper .copy a:active,.copy a:hover{outline:0}@media (min-width:600px){.cookie-law-wrapper .copy{padding:20px 60px 20px 20px;font-size:18px;line-height:24px}.cookie-law-wrapper .dismiss{top:10px;right:15px}.cookie-law-wrapper .dismiss svg{width:24px;height:24px}}`],
                animations: [translateInOut],
                encapsulation: ViewEncapsulation.None
            },] },
];
/** @nocollapse */
CookieLawComponent.ctorParameters = () => [
    { type: DomSanitizer, },
];
CookieLawComponent.propDecorators = {
    "cookieLawClass": [{ type: HostBinding, args: ['class.cookie-law',] },],
    "learnMore": [{ type: Input },],
    "awsomeCloseIcon": [{ type: Input },],
    "target": [{ type: Input },],
    "position": [{ type: Input },],
    "isSeen": [{ type: Output },],
};
function CookieLawComponent_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    CookieLawComponent.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    CookieLawComponent.ctorParameters;
    /** @type {!Object<string,!Array<{type: !Function, args: (undefined|!Array<?>)}>>} */
    CookieLawComponent.propDecorators;
    /** @type {?} */
    CookieLawComponent.prototype.closeSvg;
    /** @type {?} */
    CookieLawComponent.prototype.currentStyles;
    /** @type {?} */
    CookieLawComponent.prototype.transition;
    /** @type {?} */
    CookieLawComponent.prototype.cookieLawClass;
    /** @type {?} */
    CookieLawComponent.prototype.isSeen;
    /** @type {?} */
    CookieLawComponent.prototype.noopener;
    /** @type {?} */
    CookieLawComponent.prototype._learnMore;
    /** @type {?} */
    CookieLawComponent.prototype._awsomeCloseIcon;
    /** @type {?} */
    CookieLawComponent.prototype._target;
    /** @type {?} */
    CookieLawComponent.prototype._position;
    /** @type {?} */
    CookieLawComponent.prototype.domSanitizer;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhcjItY29va2llLWxhdy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmd1bGFyMi1jb29raWUtbGF3LyIsInNvdXJjZXMiOlsibGliL2FuZ3VsYXIyLWNvb2tpZS1sYXcuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBUUEsT0FBTyxFQUNMLFNBQVMsRUFFVCxXQUFXLEVBQ1gsaUJBQWlCLEVBQ2pCLEtBQUssRUFDTCxNQUFNLEVBQ04sWUFBWSxFQUNiLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxZQUFZLEVBQVksTUFBTSwyQkFBMkIsQ0FBQztBQUVuRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBQ3BDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxjQUFjLENBQUM7QUEyQzlDLE1BQU07Ozs7SUE2REosWUFBb0IsWUFBMEI7UUFBMUIsaUJBQVksR0FBWixZQUFZLENBQWM7c0JBVDlCLElBQUksWUFBWSxFQUFXO1FBVXpDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO1FBQzFCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO0tBQzVCOzs7O1FBeERHLFNBQVM7UUFDWCxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQzs7Ozs7O0lBRXpCLElBQUksU0FBUyxDQUFDLEtBQWE7UUFDekIsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLEtBQUssSUFBSSxJQUFJLEdBQUcsS0FBSyxFQUFFLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztLQUMzRTs7OztRQUdHLGVBQWU7UUFDakIsTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQzs7Ozs7O0lBRS9CLElBQUksZUFBZSxDQUFDLEtBQWE7UUFDL0IsSUFBSSxDQUFDLGdCQUFn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QUFDLGNBQWMsQ0FBQztnQkFDNUIsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7YUFDdEM7Ozs7WUE3Q1EsWUFBWTs7OytCQW1EbEIsV0FBVyxTQUFDLGtCQUFrQjswQkFHOUIsS0FBSztnQ0FRTCxLQUFLO3VCQVNMLEtBQUs7eUJBYUwsS0FBSzt1QkFhTCxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBhbmd1bGFyMi1jb29raWUtbGF3XG4gKlxuICogQ29weXJpZ2h0IDIwMTYtMjAxOCwgQGFuZHJlYXNvbm55ODMsIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogQGF1dGhvcjogQGFuZHJlYXNvbm55ODMgPGFuZHJlYXNvbm55ODNAZ21haWwuY29tPlxuICovXG5cbmltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgT25Jbml0LFxuICBIb3N0QmluZGluZyxcbiAgVmlld0VuY2Fwc3VsYXRpb24sXG4gIElucHV0LFxuICBPdXRwdXQsXG4gIEV2ZW50RW1pdHRlclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERvbVNhbml0aXplciwgU2FmZUh0bWwgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcbmltcG9ydCB7IEFuaW1hdGlvbkV2ZW50IH0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XG5pbXBvcnQgeyBjbG9zZUljb24gfSBmcm9tICcuL2ljb25zJztcbmltcG9ydCB7IHRyYW5zbGF0ZUluT3V0IH0gZnJvbSAnLi9hbmltYXRpb25zJztcbmltcG9ydCB7XG4gIENvb2tpZUxhd0FuaW1hdGlvbixcbiAgQ29va2llTGF3VGFyZ2V0LFxuICBDb29raWVMYXdQb3NpdGlvblxufSBmcm9tICcuL2RlZmluaXRpb25zJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnY29va2llLWxhdy1jb21wb25lbnQnLFxuICB0ZW1wbGF0ZTogYDxkaXZcbiAgY2xhc3M9XCJjb29raWUtbGF3LXdyYXBwZXJcIlxuICBbbmdTdHlsZV09XCJjdXJyZW50U3R5bGVzXCJcbiAgW0B0cmFuc2l0aW9uXT1cInRyYW5zaXRpb25cIlxuICAoQHRyYW5zaXRpb24uZG9uZSk9XCJhZnRlckRpc21pc3NBbmltYXRpb24oJGV2ZW50KVwiXG4+XG4gIDxkaXYgY2xhc3M9XCJjb3B5XCI+XG4gICAgPHNwYW4gI3JlZj48bmctY29udGVudD48L25nLWNvbnRlbnQ+PC9zcGFuPlxuXG4gICAgPHNwYW4gKm5nSWY9XCJyZWYuY2hpbGROb2Rlcy5sZW5ndGggPT0gMFwiPlxuICAgICAgQnkgY29udGludWluZyB0byBicm93c2UgdGhlIHNpdGUsIHlvdSdyZSBhZ3JlZWluZyB0byBvdXIgdXNlIG9mIGNvb2tpZXMuXG4gICAgICA8c3BhbiAqbmdJZj1cImxlYXJuTW9yZVwiPlxuICAgICAgICBMZWFybiBtb3JlIGluIG91clxuICAgICAgICA8YSBbaHJlZl09XCJsZWFybk1vcmVcIiBbdGFyZ2V0XT1cInRhcmdldFwiIFtyZWxdPVwibm9vcGVuZXIgPyAnbm9vcGVuZXIgbm9yZWZlcnJlcicgOiBudWxsXCJcbiAgICAgICAgICA+cHJpdmFjeSBwb2xpY3k8L2FcbiAgICAgICAgPi5cbiAgICAgIDwvc3Bhbj5cbiAgICA8L3NwYW4+XG5cbiAgICA8YVxuICAgICAgaHJlZj1cIiNcIlxuICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICBjbGFzcz1cImRpc21pc3NcIlxuICAgICAgW2lubmVySFRNTF09XCJjbG9zZVN2Z1wiXG4gICAgICAoY2xpY2spPVwiZGlzbWlzcygkZXZlbnQpXCJcbiAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiY2xvc2VTdmdcIlxuICAgID48L2E+XG4gIDwvZGl2PlxuPC9kaXY+XG5gLFxuICBzdHlsZXM6IFtgLmNvb2tpZS1sYXctd3JhcHBlcntiYWNrZ3JvdW5kOiMzMzM7Y29sb3I6I2JiYjtkaXNwbGF5OmJsb2NrO2ZvbnQtZmFtaWx5OkhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxNXB4O2ZvbnQtd2VpZ2h0OjIwMDtsaW5lLWhlaWdodDoyMHB4O3Bvc2l0aW9uOmZpeGVkO2JvdHRvbTowO2xlZnQ6MDt3aWR0aDoxMDAlO3otaW5kZXg6OTk5OTk5OTk5O2ZvbnQtc21vb3RoOmFsd2F5czstd2Via2l0LWZvbnQtc21vb3RoaW5nOmFudGlhbGlhc2VkfS5jb29raWUtbGF3LXdyYXBwZXIgYXtjb2xvcjojYmJiO3RyYW5zaXRpb246Y29sb3IgLjJzfS5jb29raWUtbGF3LXdyYXBwZXIgYTpob3Zlcntjb2xvcjojZmZmfS5jb29raWUtbGF3LXdyYXBwZXIgYTpob3ZlciBzdmd7ZmlsbDojZmZmfS5jb29raWUtbGF3LXdyYXBwZXIgLmRpc21pc3N7ZGlzcGxheTpibG9jaztib3gtc2l6aW5nOmJvcmRlci1ib3g7cGFkZGluZzoxMHB4O3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjEwcHg7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6MjBweH0uY29va2llLWxhdy13cmFwcGVyIC5kaXNtaXNzIHN2Z3tkaXNwbGF5OmJsb2NrO2ZpbGw6I2JiYjt3aWR0aDoyMHB4O2hlaWdodDoyMHB4O3RyYW5zaXRpb246ZmlsbCAuMnN9LmNvb2tpZS1sYXctd3JhcHBlciAuY29weXtib3gtc2l6aW5nOmJvcmRlci1ib3g7cGFkZGluZzoxMHB4IDYwcHggMTBweCAxMHB4fS5jb29raWUtbGF3LXdyYXBwZXIgLmNvcHkgc3Bhbntjb2xvcjojZmZmO2ZvbnQtd2VpZ2h0OjQwMH0uY29va2llLWxhdy13cmFwcGVyIC5jb3B5IGF7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0uY29va2llLWxhdy13cmFwcGVyIC5jb3B5IGE6YWN0aXZlLC5jb3B5IGE6aG92ZXJ7b3V0bGluZTowfUBtZWRpYSAobWluLXdpZHRoOjYwMHB4KXsuY29va2llLWxhdy13cmFwcGVyIC5jb3B5e3BhZGRpbmc6MjBweCA2MHB4IDIwcHggMjBweDtmb250LXNpemU6MThweDtsaW5lLWhlaWdodDoyNHB4fS5jb29raWUtbGF3LXdyYXBwZXIgLmRpc21pc3N7dG9wOjEwcHg7cmlnaHQ6MTVweH0uY29va2llLWxhdy13cmFwcGVyIC5kaXNtaXNzIHN2Z3t3aWR0aDoyNHB4O2hlaWdodDoyNHB4fX1gXSxcbiAgYW5pbWF0aW9uczogW3RyYW5zbGF0ZUluT3V0XSxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBDb29raWVMYXdDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBwdWJsaWMgY2xvc2VTdmc6IFNhZmVIdG1sO1xuICBwdWJsaWMgY3VycmVudFN0eWxlczogYW55O1xuICBwdWJsaWMgdHJhbnNpdGlvbjogQ29va2llTGF3QW5pbWF0aW9uO1xuXG4gIEBIb3N0QmluZGluZygnY2xhc3MuY29va2llLWxhdycpXG4gIHB1YmxpYyBjb29raWVMYXdDbGFzczogYm9vbGVhbjtcblxuICBASW5wdXQoKVxuICBnZXQgbGVhcm5Nb3JlKCkge1xuICAgIHJldHVybiB0aGlzLl9sZWFybk1vcmU7XG4gIH1cbiAgc2V0IGxlYXJuTW9yZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fbGVhcm5Nb3JlID0gdmFsdWUgIT09IG51bGwgJiYgYCR7dmFsdWV9YCAhPT0gJ2ZhbHNlJyA/IHZhbHVlIDogbnVsbDtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGdldCBhd3NvbWVDbG9zZUljb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2F3c29tZUNsb3NlSWNvbjtcbiAgfVxuICBzZXQgYXdzb21lQ2xvc2VJY29uKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9hd3NvbWVDbG9zZUljb24gPVxuICAgICAgdmFsdWUgIT09IG51bGwgJiYgYCR7dmFsdWV9YCAhPT0gJ2ZhbHNlJyA/IHZhbHVlIDogbnVsbDtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGdldCB0YXJnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldDtcbiAgfVxuICBzZXQgdGFyZ2V0KHZhbHVlOiBDb29raWVMYXdUYXJnZXQpIHtcbiAgICB0aGlzLl90YXJnZXQgPVxuICAgICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAgIGAke3ZhbHVlfWAgIT09ICdmYWxzZScgJiZcbiAgICAgIChgJHt2YWx1ZX1gID09PSAnX2JsYW5rJyB8fCBgJHt2YWx1ZX1gID09PSAnX3NlbGYnKVxuICAgICAgICA/IHZhbHVlXG4gICAgICAgIDogJ19ibGFuayc7XG4gIH1cblxuICBASW5wdXQoKVxuICBnZXQgcG9zaXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xuICB9XG4gIHNldCBwb3NpdGlvbih2YWx1ZTogQ29va2llTGF3UG9zaXRpb24pIHtcbiAgICB0aGlzLl9wb3NpdGlvbiA9XG4gICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgYCR7dmFsdWV9YCAhPT0gJ2ZhbHNlJyAmJlxuICAgICAgKGAke3ZhbHVlfWAgPT09ICd0b3AnIHx8IGAke3ZhbHVlfWAgPT09ICdib3R0b20nKVxuICAgICAgICA/IHZhbHVlXG4gICAgICAgIDogJ2JvdHRvbSc7XG4gIH1cblxuICBAT3V0cHV0KClcbiAgcHVibGljIGlzU2VlbiA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcblxuICBwdWJsaWMgbm9vcGVuZXI6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBfbGVhcm5Nb3JlOiBzdHJpbmc7XG4gIHByaXZhdGUgX2F3c29tZUNsb3NlSWNvbjogc3RyaW5nO1xuICBwcml2YXRlIF90YXJnZXQ6IENvb2tpZUxhd1RhcmdldDtcbiAgcHJpdmF0ZSBfcG9zaXRpb246IENvb2tpZUxhd1Bvc2l0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZG9tU2FuaXRpemVyOiBEb21TYW5pdGl6ZXIpIHtcbiAgICB0aGlzLnRyYW5zaXRpb24gPSAnYm90dG9tSW4nO1xuICAgIHRoaXMuX3Bvc2l0aW9uID0gJ2JvdHRvbSc7XG4gICAgdGhpcy5jb29raWVMYXdDbGFzcyA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5ub29wZW5lciA9IHRoaXMuX3RhcmdldCA9PT0gJ19ibGFuayc7XG4gICAgdGhpcy50cmFuc2l0aW9uID0gdGhpcy5wb3NpdGlvbiA9PT0gJ2JvdHRvbScgPyAnYm90dG9tSW4nIDogJ3RvcEluJztcblxuICAgIGlmICh0aGlzLl9hd3NvbWVDbG9zZUljb24pIHtcbiAgICAgIHRoaXMuY2xvc2VTdmcgPSB0aGlzLmRvbVNhbml0aXplci5ieXBhc3NTZWN1cml0eVRydXN0SHRtbChcbiAgICAgICAgYDxpIGNsYXNzPVwiZmFiICR7dGhpcy5fYXdzb21lQ2xvc2VJY29ufVwiPjwvaT5gXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsb3NlU3ZnID0gdGhpcy5kb21TYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdEh0bWwoY2xvc2VJY29uKTtcbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnRTdHlsZXMgPSB7XG4gICAgICB0b3A6IHRoaXMucG9zaXRpb24gPT09ICd0b3AnID8gJzAnIDogbnVsbCxcbiAgICAgIGJvdHRvbTogdGhpcy5wb3NpdGlvbiA9PT0gJ3RvcCcgPyAnaW5pdGlhbCcgOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBhZnRlckRpc21pc3NBbmltYXRpb24oZXZ0OiBBbmltYXRpb25FdmVudCk6IHZvaWQge1xuICAgIGlmIChldnQudG9TdGF0ZSA9PT0gJ3RvcE91dCcgfHwgZXZ0LnRvU3RhdGUgPT09ICdib3R0b21PdXQnKSB7XG4gICAgICB0aGlzLmlzU2Vlbi5lbWl0KHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkaXNtaXNzKGV2dD86IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICB0aGlzLnRyYW5zaXRpb24gPSB0aGlzLnBvc2l0aW9uID09PSAndG9wJyA/ICd0b3BPdXQnIDogJ2JvdHRvbU91dCc7XG4gIH1cbn1cbiJdfQ==