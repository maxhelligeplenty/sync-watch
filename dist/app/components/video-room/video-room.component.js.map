{"version":3,"sources":["app/components/video-room/video-room.component.ts"],"names":[],"mappings":"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","file":"app/components/video-room/video-room.component.js","sourcesContent":["import {\n    Component,\n    Input,\n    OnInit\n} from '@angular/core';\nimport { SyncVideoInterface } from '../../interface/sync-video.interface';\nimport { Message } from '../../interface/message.interface';\nimport { Event } from '../../interface/event.interface';\nimport { isNullOrUndefined } from 'util';\nimport { VideoInfoInterface } from '../../interface/video-info.interface';\nimport {\n    UserEnum,\n    UserInterface\n} from '../../interface/user.interface';\nimport { PlaylistInterface } from '../../interface/playlist.interface';\nimport { YoutubeVideoDataService } from '../../service/youtube-video-data.service';\nimport * as socketIo from 'socket.io-client';\nimport * as copy from 'copy-to-clipboard';\nimport * as rug from 'random-username-generator';\nimport { Router } from '@angular/router';\n\nconst SERVER_URL = 'http://localhost:8080';\n\n@Component({\n    selector:    'video-room',\n    templateUrl: './video-room.component.html',\n    styleUrls:   ['./video-room.component.scss']\n})\nexport class VideoRoomComponent implements OnInit\n{\n    @Input() protected room:string = 'whatHappened';\n\n    public newVideoUrl:string;\n    public syncData:SyncVideoInterface;\n    public videoHistoryList:Array<PlaylistInterface> = [];\n    public messages:Array<Message> = [];\n    public newMessage:string;\n    public currentRoomMember:Array<UserInterface> = [];\n\n    protected videoId:string = 'xfr-OiX-46w';\n\n    private isReady:boolean = false;\n    private user:UserInterface;\n    private socket;\n\n    constructor(private youtubeVideoDataService:YoutubeVideoDataService,\n                private router:Router)\n    {\n\n    }\n\n    public ngOnInit():void\n    {\n\n    }\n\n    public addNewVideoUrl(url:string):void\n    {\n        if(!isNullOrUndefined(url))\n        {\n            let videoId:string = this.getVideoId(url);\n            this.youtubeVideoDataService.getVideoInfoById(videoId).subscribe((res:any) =>\n            {\n                let videoData:PlaylistInterface = {\n                    videoId:   videoId,\n                    videoData: {\n                        thumbnail: res.items[0].snippet.thumbnails.default.url,\n                        title:     res.items[0].snippet.localized.title.substring(0, 25) +\n                                   (res.items[0].snippet.localized.title.length > 24 ? '...' : '')\n                    }\n                };\n                this.syncData.socket.emit(Event.NEW_VIDEO, videoData);\n            });\n            this.newVideoUrl = undefined;\n        }\n    }\n\n    public copyInviteLinkToClipboard():void\n    {\n        copy(document.location.href);\n    }\n\n    protected navigateToStartPage():void\n    {\n        this.syncData.socket.emit().destroy();\n        this.router.navigateByUrl('/start');\n    }\n\n    protected savePlayer(player:YT.Player):void\n    {\n        this.initIoConnection();\n        this.syncData = {\n            videoId: this.videoId,\n            player:  player,\n            socket:  this.socket,\n            room:    this.room,\n        };\n        this.syncData.player.playVideo();\n        this.isReady = true;\n    }\n\n    protected onStateChange():void\n    {\n        this.changeState(this.syncData.player.getPlayerState());\n    }\n\n    protected sendMessage(text:string):void\n    {\n        if(!isNullOrUndefined(text))\n        {\n            let message:Message = {\n                from:    this.user,\n                content: text\n            };\n            this.syncData.socket.emit(Event.SEND_MESSAGE, message);\n            this.newMessage = undefined;\n        }\n    }\n\n    protected playNewVideoById(id:string)\n    {\n        this.syncData.socket.emit(Event.PLAY_NEW_VIDEO, id);\n    }\n\n    private initIoConnection():void\n    {\n        this.socket = socketIo(SERVER_URL);\n\n        this.socket.on(Event.CONNECT, () =>\n        {\n            this.syncData.clientId = this.socket.id;\n            this.user = {\n                id:     this.syncData.clientId,\n                name:   rug.generate(),\n                role:   'member',\n                status: UserEnum.JOINING\n            };\n\n            this.syncData.socket.emit(Event.JOIN, this.syncData.room, this.user.name);\n            this.syncData.socket.emit(Event.ALERT_MEMBERS_NEW_USER, this.user);\n            this.syncData.socket.emit(Event.ASK_VIDEO_INFORMATION, this.socket.id);\n        });\n\n        this.socket.on(Event.SEND_MESSAGE, (message:Message) =>\n        {\n            this.messages.push(message);\n        });\n\n        this.socket.on(Event.PLAY_NEW_VIDEO, (id:string) =>\n        {\n            this.syncData.player.loadVideoById({\n                videoId:      id,\n                startSeconds: 0\n            });\n        });\n\n        this.socket.on(Event.PLAY, () =>\n        {\n            this.syncData.player.playVideo();\n        });\n\n        this.socket.on(Event.PAUSE, () =>\n        {\n            this.syncData.player.pauseVideo();\n        });\n\n        this.socket.on(Event.SYNC_TIME, (time:number) =>\n        {\n            this.syncVideoTime(time);\n        });\n\n        this.socket.on(Event.NEW_VIDEO, (videoData:PlaylistInterface) =>\n        {\n            this.videoHistoryList.unshift(videoData);\n        });\n\n        this.socket.on(Event.ASK_VIDEO_INFORMATION, (socketId:string) =>\n        {\n            let videoInfo:VideoInfoInterface = {\n                url:  this.syncData.player.getVideoUrl(),\n                time: this.syncData.player.getCurrentTime()\n            };\n            this.syncData.socket.emit(Event.SYNC_VIDEO_INFORMATION, videoInfo, socketId);\n        });\n\n        this.socket.on(Event.SYNC_VIDEO_INFORMATION, (videoInfo:VideoInfoInterface) =>\n        {\n            this.syncData.player.loadVideoById({\n                videoId:      this.getVideoId(videoInfo.url),\n                startSeconds: videoInfo.time\n            });\n        });\n\n        this.socket.on(Event.ALERT_MEMBERS_NEW_USER, (user:UserInterface) =>\n        {\n            this.currentRoomMember.push(user);\n            this.syncData.socket.emit(Event.SYNC_CURRENT_ROOM_MEMBER, this.user, user.id);\n        });\n\n        this.socket.on(Event.SYNC_CURRENT_ROOM_MEMBER, (user:UserInterface) =>\n        {\n            this.currentRoomMember.push(user);\n        });\n\n        this.socket.on(Event.ASK_VIDEO_TIME, (socketId:string) =>\n        {\n            this.syncData.socket.emit(Event.SYNC_TIME_ON_JOIN, socketId, this.syncData.player.getCurrentTime());\n        });\n\n        this.socket.on(Event.SYNC_TIME_ON_JOIN, (time:number) =>\n        {\n            this.syncVideoTime(time);\n        });\n\n        this.socket.on(Event.ASK_STATUS, (socketId:string) =>\n        {\n            this.syncData.socket.emit(Event.SYNC_TIME_ON_JOIN, socketId, this.syncData.player.getPlayerState());\n        });\n\n        this.socket.on(Event.SYNC_STATUS, (status:number) =>\n        {\n            this.changeState(status);\n        });\n\n        //this.socket.on(Event.GET_USER_ROLE, (userList:Array<UserInterface>) =>\n        //{\n        //    // TODO Replace with enum\n        //    console.log(userList);\n        //    let checkIfHostExists:UserInterface = userList.find((user:UserInterface) =>\n        //    {\n        //        return user.role === 'host'\n        //    });\n        //    console.log(checkIfHostExists);\n        //\n        //    if(isNullOrUndefined(checkIfHostExists))\n        //    {\n        //        this.user.role = 'host';\n        //    }\n        //    console.log(this.user);\n        //});\n        //this.socket.on(Event.SYNC_HOST);\n        //\n        //this.socket.on(Event.ASK_FOR_SYNC_TIME, ());\n        //this.socket.on(Event.SYNC_TIME_BY_HOST, ())\n\n    }\n\n    private syncVideoTime(time:number):void\n    {\n        if(this.syncData.player.getCurrentTime() < time - 0.2 || this.syncData.player.getCurrentTime() > time + 0.2)\n        {\n            this.syncData.player.seekTo(time, true);\n        }\n    }\n\n    private changeState(state:number):void\n    {\n        if(this.isReady)\n        {\n            switch(state)\n            {\n                case -1:\n                    break;\n                case 1:\n                    if(this.user.status === UserEnum.JOINING)\n                    {\n                        this.syncData.socket.emit(Event.ASK_VIDEO_TIME, this.user.id);\n                        this.syncData.socket.emit(Event.PLAY);\n                        this.user.status = UserEnum.JOINED;\n                    }\n                    else\n                    {\n                        this.syncData.socket.emit(Event.SYNC_TIME, this.syncData.player.getCurrentTime());\n                        this.syncData.socket.emit(Event.PLAY);\n                    }\n                    break;\n                case 2:\n                    this.syncData.socket.emit(Event.PAUSE);\n                    break;\n                case 3:\n                    this.syncData.player.playVideo();\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n\n    private getVideoId(url):string\n    {\n        if(!isNullOrUndefined(url) && !isNullOrUndefined(this.syncData.player))\n        {\n            let idRegex:RegExp = /(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/ ]{11})/i;\n            let videoId:string = url.split(idRegex)[1];\n            return videoId;\n        }\n    }\n}\n"],"sourceRoot":"/source/"}